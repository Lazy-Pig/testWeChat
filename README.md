# testWeChat
这是一个可以自动发送微信消息以及朋友圈的小工具。这个小工具其实是一个用Uiautomator在Android Studio下写的微信自动测试。

写这个工具的初衷是为了收集微信通信数据，没有在google到相关的工具只好自己动手写，否则要手动发送上千条微信消息以及朋友圈工作量实在太大。

把这个小工具分享出来希望能帮到一部分人，也是为了记录一下，毕竟不知道什么时候又会用到。程序写得不好，不过之后可能不会有时间维护了，如果有人愿意提交改进，我可以为你开通权限。

最后，本工具开发初衷是为科学研究收集数据，如用作非法用途，后果自负。

## 开发环境
- 操作系统：Win8.1

- IDE: Android Studio

- JDK: 1.8

- 自动测试框架：Uiautomator

- 测试手机： 红米2（android 5.0 API 21）

## 功能简介
本工具主要提供向朋友发送微信消息和在朋友圈中发布消息两个功能。所有操作的流程与正常手动操作微信完全相同。工具的主要功能在app/src/androidTest/java/com/example/judy/uiautomatordemo文件夹中的UiAutomatorTest.java文件中实现，如果想修改某些功能应该只需要改这个文件。鄙人对Uiautomator和Android Studio的研究尚浅，能写出这个小工具全都仰仗google和bing，如果你有什么问题也可以多多请教google。

### 向朋友发送消息
程序开始时先选择通讯录中的一个用户，接着向这个用户发送文字、图片和语音。

- 发送文字消息是从手机sd卡中/data/local/input/test.txt文件中随机截取的一段中文字符串进行发送。

- 发送图片消息是从手机卡中随机选择一张图片进行发送，每次只发送一张，但可以循环多次发送。

- 发送语音消息的时长是随机的，语音内容就是在发送语音时的环境中的声音（跟正常使用微信发送语音是一样的）。

### 在朋友圈中发布消息
打开朋友圈，发送纯文本消息和纯图片消息。

- 长按朋友圈右上角的“相机”按钮发送纯文本朋友圈，内容也是从手机sd卡中/data/local/input/test.txt文件中随机截取的不定长度的消息。

- 短按“相机”按钮发送带有照片的朋友圈，首先从1-9中随机选一个整数n（朋友圈一次最多发送9张照片），作为发送照片的数量，然后从手机相册中随机滑动勾选n张照片进行发送。
